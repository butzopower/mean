<section data-ng-controller="ArticlesController" data-ng-init="find()">
	<alert ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>

	<h1 data-ng-hide="!articles || articles.length">No articles yet. <br> Why don't you <a data-ng-click="addArticle()">Create One</a>?</h1>

	<div>
		<p>Search: <input type="search" ng-model="query" results="5" placeholder="Search"></p>
		<p>Order By:
			<a data-ng-click="sortTitle()">{{sortTitleName}}</a>,
			<a data-ng-click="sortDate()">{{sortDateName}}</a>
		</p>
	</div>

	<a data-ng-click="addArticle()">
		<i class="glyphicon glyphicon-plus"></i> Add
	</a>
	<div data-ng-include="addTemplate"></div>


	<ul class="articles list-group">
		<li data-ng-repeat="article in articles | filter:query | orderBy:sortPredicate" data-ng-class="article.title | dasherize" class="list-group-item">
			<span>{{article.created | date:'medium'}}</span> /
			<span>{{article.user.name}}</span>
			<h2>{{article.title}}</h2>
			<div><span class="label label-primary" data-ng-repeat="tag in article.tags">{{tag}}</span></div>
			<div>{{article.content}}</div>
			<div data-ng-show="global.user._id == article.user._id">
				<a class="btn edit" data-ng-click="editArticle(article)">
					<i class="glyphicon glyphicon-edit"></i> Edit
				</a>
				<a class="btn delete" data-ng-click="remove(article);">
					<i class="glyphicon glyphicon-trash"></i> Delete
				</a>
				<div data-ng-include="article.editTemplate"></div>
			</div>
		</li>
	</ul>
</section>
